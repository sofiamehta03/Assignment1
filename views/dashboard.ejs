<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width-device-width, initial-scale=1.0">
    <title>My Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/stylesheets/style.css">

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
</head>

<body>

    <header>
        <div class="user">
            <img src="/images/logo.jfif" alt="">
            <h3 class="name">Sofia Mehta</h3>
            <p class="post">Software Engineering Student</p>
        </div>

        <nav class="navbar">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/">About</a></li>
                <li><a href="/">Projects</a></li>
                <li><a href="/">services</a></li>
                <li><a href="/">Contact</a></li>
                <li><a href="/Dashboard">Dashboard</a></li>
            </ul>
        </nav>

    </header>


    <div id="menu" class="fas fa-bars"></div>

    <section class="portfolio" id="portfolio">

        <h1 class="heading"> My <span>Dashboard</span> </h1>

        <button id="portfolioBtn" class="portfolioBtn">Add a new contact</button>
        <form style="float: right;" action="/logout" method="post"><button id="submit" class="portfolioBtn">Logout</button>
        </form>
        <div class="box-container">

            <table>
                <thead>
                    <th>Contact Name</th>
                    <th>Contact Number</th>
                    <th>Email Address</th>
                    <th>Options</th>
                </thead>
                
                <% contacts.forEach(user => { %>
                    <tr>
                        <td><%= user.name %></td>
                        <td><%= user.phone %></td>
                        <td><%= user.email %></td>
                        <td><a href="/update/<%= user._id %>" class="contactBtn">Update</a>
                            <a class="contactBtn" href="/remove/<%= user._id %>">Delete</a>
                        </td>
                    </tr>
                <% }) %>
            </table>


        </div>


        <div class="form-popup" id="myForm">
            <form action="/saveContact" method="post" class="form-container">
                <h1>Add Contact</h1>

                <label for="name"><b>Contact Name</b></label>
                <input type="text" placeholder="Enter Name" name="name" required>

                <label for="phone"><b>Contact Number</b></label>
                <input type="text" placeholder="Enter Contact Number" name="phone" required>

                <label for="email"><b>Email</b></label>
                <input type="text" placeholder="Enter Email" name="email" required>

                <button type="submit" class="btn">Save Contact</button>
                <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
            </form>
        </div>

        <div id="snackbar">Contact Saved..</div>
        <% if (locals.success) { %>
            <script>
                myFunction();
                function myFunction() {
                    // Get the snackbar DIV
                    var x = document.getElementById("snackbar");

                    // Add the "show" class to DIV
                    x.className = "show";

                    // After 3 seconds, remove the show class from DIV
                    setTimeout(function () { x.className = x.className.replace("show", ""); }, 3000);
                }
            </script>
            <% } %>


            <div class="form-popup-update" id="myUpdateForm">
                <form action="/updateContact" method="post" class="form-container">
                    <h1>Update</h1>
    
                    <label for="name"><b>Contact Name</b></label>
                    <input type="text" placeholder="Enter Name" name="name" value="hi" required>
    
                    <label for="phone"><b>Contact Number</b></label>
                    <input type="text" placeholder="Enter Contact Number" name="phone" value="hi" required>
    
                    <label for="email"><b>Email</b></label>
                    <input type="text" placeholder="Enter Email" name="email" value="hi" required>
    
                    <button type="submit" class="btn">Update Contact</button>
                    <button type="button" class="btn cancel" onclick="closeUpdateForm()">Close</button>
                </form>
            </div>

    </section>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/javascripts/script.js"></script>

</body>

</html>